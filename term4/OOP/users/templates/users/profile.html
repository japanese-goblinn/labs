{% extends 'main/base.html' %}
{% load crispy_forms_tags %}
{% block content %}
<div class="media">
    <img class="rounded-circle account-img" src="{{ user.profile.image.url }}">
    <div class="media-body">
        <h2 class="account-heading">{{ user.username }}</h2>
        <p class="text-secondary">{{ user.email }}</p>
    </div>
</div>
<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link active" data-toggle="tab" href="#profile">Profile</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#mybooks">My Books</a>
  </li>
</ul>
<div id="myTabContent" class="tab-content">
  <div class="tab-pane fade active show" id="profile">
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{ u_form|crispy }}
        {{ p_form|crispy }}
        <div class="form-group">
            <button class="btn btn-outline-info" type="submit">Update</button>
        </div>
    </form>
  </div>
  <div class="tab-pane fade" id="mybooks">
    {% if user_books %}
      {% for user_book in user_books %}
          <p><a href={% url 'book_detail' pk=user_book.book.id %}>{{ user_book.book.name }}</a></p>
      {% endfor %}
    {% else %}
      <p>List is empty</p>
    {% endif %}
  </div>
</div>
{% endblock %}